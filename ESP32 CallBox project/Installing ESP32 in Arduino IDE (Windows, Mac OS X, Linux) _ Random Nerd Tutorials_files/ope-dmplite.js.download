!function(){"use strict";var t=function(){function t(){this.initialCallPromise=null,this.maxCallDelayMs=2e3}return t.prototype.callPixel=function(t,n){var e=this,r=function(t,n){return new Promise((function(r){Object.entries(n).forEach((function(n){var e=n[0],r=n[1];void 0!==r&&t.searchParams.append(e,r)}));var o=new Image;o.addEventListener("load",(function(){1==o.width&&1==o.height?r({isThirdPartyTrackable:!1}):r({isThirdPartyTrackable:!0})})),o.addEventListener("error",(function(){1==o.width&&1==o.height?r({isThirdPartyTrackable:!1}):r({isThirdPartyTrackable:!0})})),window.setTimeout((function(){r({isThirdPartyTrackable:!1})}),e.maxCallDelayMs),o.src=t.toString()}))};return null===this.initialCallPromise?this.initialCallPromise=r(t,n):this.initialCallPromise=this.initialCallPromise.then((function(){return r(t,n)})),this.initialCallPromise},t}();var n=["tcf2","implied","usp","noConsent","auto","gpp"],e=function(){function t(){}return t.parseStringOrNull=function(t){return null==t?null:t.toString()},t.parseString=function(t){return t.toString()},t.parseStringArray=function(t){if(Array.isArray(t)){for(var n=!0,e=0;e<t.length&&n;e++)"string"!=typeof t[0]&&(n=!1);if(n)return t;throw new Error("There are non strings in the array")}throw new Error("Expected array but got ".concat(t))},t.parseBoolean=function(t){if("boolean"==typeof t)return t;throw new Error("Expected boolean, but got ".concat(t))},t.parseObject=function(t){if("object"==typeof t)return t;throw new Error("Expected object, got ".concat(t))},t.parseOptions=function(n){return n?t.parseObject(n):{}},t.validateOptCallback=function(n){return n?t.validateCallback(n):void 0},t.validateCallback=function(t){if("function"==typeof t)return t;throw new Error("Expected callback function, but got ".concat(t))},t.parseCmpName=function(e){var r=n.find((function(n){return n===t.parseString(e)}));if(r)return r;throw new Error("Invalid cmp name: ".concat(e))},t.parseSeatId=function(t){if(/^[a-zA-Z0-9\.-]+$/.test(t))return t;throw new Error('Invalid seat id "'.concat(t,'"'))},t}(),r=function(t,n,r){var o=this;this.sdkStates=t,this.globalContext=n,this.commandParser=r,this.ope=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{var r=e.parseSeatId(t[0]),i=e.parseString(t[1]),a=o.commandParser.parse(r,i,t.slice(2));null!==a&&o.sdkStates.set(r,a.run(o.sdkStates.get(r),o.globalContext))}catch(t){}}},o=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;var i,a=function(t){return"string"==typeof t&&o.test(t)},c=new Uint8Array(16);function u(){if(!i&&!(i="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return i(c)}for(var s=[],l=0;l<256;++l)s.push((l+256).toString(16).substr(1));var p=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=(s[t[n+0]]+s[t[n+1]]+s[t[n+2]]+s[t[n+3]]+"-"+s[t[n+4]]+s[t[n+5]]+"-"+s[t[n+6]]+s[t[n+7]]+"-"+s[t[n+8]]+s[t[n+9]]+"-"+s[t[n+10]]+s[t[n+11]]+s[t[n+12]]+s[t[n+13]]+s[t[n+14]]+s[t[n+15]]).toLowerCase();if(!a(e))throw TypeError("Stringified UUID is invalid");return e};var f,h=function(t,n,e){var r=(t=t||{}).random||(t.rng||u)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,n){e=e||0;for(var o=0;o<16;++o)n[e+o]=r[o];return n}return p(r)},d=function(){function t(t){this.storage=t}return t.instance=function(){return new t(localStorage)},t.prototype.getOrCreateFpid=function(n){if(this.isOptedOut()||!(null==n?void 0:n.trackingEnabled()))return{};var e=this.getFpid();return a(e)||(e=this.save(t.key,h())),e?{fpid:e}:{}},t.prototype.getIds=function(){var t=this.getFpid();return this.isOptedOut()||!a(t)?{}:{fpid:t}},t.prototype.getPapiParameters=function(t){return this.getOrCreateFpid(t)},t.prototype.getFpid=function(){return this.load(t.key)},t.prototype.removeFpid=function(){this.storage.removeItem(t.key)},t.prototype.isOptedOut=function(){return this.load(t.trackingStatusKey)===t.optedOut},t.prototype.optin=function(){var n;try{this.storage.removeItem(t.trackingStatusKey)}catch(t){var e=new Error("First party id optin failed with: ".concat(null!==(n=null==t?void 0:t.message)&&void 0!==n?n:t.toString));throw e.name="FpidOptinError",e}},t.prototype.optout=function(){var n;try{this.storage.setItem(t.trackingStatusKey,t.optedOut)}catch(t){var e=new Error("First party id optout failed with: ".concat(null!==(n=null==t?void 0:t.message)&&void 0!==n?n:t.toString));throw e.name="FpidOptoutError",e}},t.prototype.load=function(t){try{return this.storage.getItem(t)}catch(t){return null}},t.prototype.save=function(t,n){try{return this.storage.setItem(t,n),n}catch(t){return null}},t.key="ope_fpid",t.trackingStatusKey="ope_fpid_tracking_status",t.optedOut="opted_out",t}(),v=function(){function t(t,n){this.seat=t,this.cb=n}return t.prototype.run=function(t){var n,e=this;try{return this.action(t).then((function(){var t;return null===(t=e.cb)||void 0===t?void 0:t.call(e,null,!0)}),(function(t){var n;return null===(n=e.cb)||void 0===n?void 0:n.call(e,t,!1)})),t}catch(e){return null===(n=this.cb)||void 0===n||n.call(this,e,!1),t}},t}(),y=(f=function(t,n){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])},f(t,n)},function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function e(){this.constructor=t}f(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}),g=function(t){function n(n,e,r){var o=t.call(this,n,r)||this;return o.tenant=e,o}return y(n,t),n.prototype.run=function(t){var n,e=this;try{return this.action(t).then((function(){var t;return null===(t=e.cb)||void 0===t?void 0:t.call(e,null,!0)}),(function(t){var n;return null===(n=e.cb)||void 0===n?void 0:n.call(e,t,!1)})),t}catch(e){return null===(n=this.cb)||void 0===n||n.call(this,e,!1),t}},n}(v),w=function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])},t(n,e)};return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),m=function(t,n,e,r){return new(e||(e=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function c(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(a,c)}u((r=r.apply(t,n||[])).next())}))},b=function(t,n){var e,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;a;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(t,a)}catch(t){i=[6,t],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},O=function(t){function n(n,e,r,o,i){var a=t.call(this,n,e,i)||this;return a.email=r,a.language=o,a}return w(n,t),n.prototype.action=function(t){return m(this,void 0,void 0,(function(){var n;return b(this,(function(e){switch(e.label){case 0:return n=d.instance().getFpid(),[4,t.taggerGdprClient.dataAccess(this.seat,this.tenant,this.email,this.language,n)];case 1:return e.sent(),[2]}}))}))},n}(g),S=function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])},t(n,e)};return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),P=function(t,n,e,r){return new(e||(e=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function c(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(a,c)}u((r=r.apply(t,n||[])).next())}))},k=function(t,n){var e,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;a;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(t,a)}catch(t){i=[6,t],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},_=function(t){function n(n,e,r){var o=t.call(this,n,e,r)||this;return o.tenant=e,o}return S(n,t),n.prototype.action=function(t){return P(this,void 0,void 0,(function(){var n,e;return k(this,(function(r){switch(r.label){case 0:return n=d.instance(),e=n.getFpid(),n.optout(),[4,t.taggerGdprClient.optOut(this.seat,this.tenant,e)];case 1:return r.sent(),[2]}}))}))},n}(g),C=function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])},t(n,e)};return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),E=function(t,n,e,r){return new(e||(e=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function c(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(a,c)}u((r=r.apply(t,n||[])).next())}))},x=function(t,n){var e,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;a;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(t,a)}catch(t){i=[6,t],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},T=function(t){function n(n,e,r){var o=t.call(this,n,e,r)||this;return o.tenant=e,o}return C(n,t),n.prototype.action=function(t){return E(this,void 0,void 0,(function(){var n=this;return x(this,(function(e){switch(e.label){case 0:return[4,t.taggerGdprClient.dataDeletion(this.seat,this.tenant,d.instance().getFpid())];case 1:return e.sent(),[4,new Promise((function(e,r){new _(n.seat,n.tenant,(function(t,n){t?r(t):n?e():r("failed optout")})).run(t)}))];case 2:return e.sent(),[2]}}))}))},n}(g),I=function(t){this.args=t,this.metric="sdk-consent-delayed"},A=function(t){this.args=t,this.metric="sdk-consent-rejected"},U=function(t){this.args=t,this.metric="sdk-consent-error"};function F(t,n){return function(e){var r=function(t,n){var e=new URL("".concat(n.metric),t);return Object.entries(n.args).forEach((function(t){var n=t[0],r=t[1];e.searchParams.set(n,r)})),e}(new URL("".concat(n,"/v2/metrics/"),t),e),o=new XMLHttpRequest;o.open("GET",r.toString()),o.send()}}F(new URL("https://tagger.opecloud.com"),"undefined");var j=function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])},t(n,e)};return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),D=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return j(n,t),n}(Error);var R=function(t,n,e,r){return new(e||(e=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function c(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(a,c)}u((r=r.apply(t,n||[])).next())}))},L=function(t,n){var e,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;a;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(t,a)}catch(t){i=[6,t],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},N=function(){function t(t){this.storage=t}return t.prototype.withConsent=function(t){return R(this,void 0,void 0,(function(){return L(this,(function(n){switch(n.label){case 0:return[4,t.deviceAccessOk()];case 1:if(n.sent())return[2,this.storage];throw Error("Missing consent for accessing device storage.")}}))}))},t.prototype.removeItem=function(t){this.storage.removeItem(t)},t}(),V=function(t,n,e,r){return new(e||(e=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function c(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(a,c)}u((r=r.apply(t,n||[])).next())}))},K=function(t,n){var e,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;a;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(t,a)}catch(t){i=[6,t],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}};var M=function(){function t(n,e,r){this.privacyAwareStorage=n,this.ttl=e,this.type=r,this.storageKey=t.localStorageKey(r)}return t.localStorageKey=function(n){switch(n){case"contextual":return t.contextualKey;case"fullProfile":return t.profileKey;default:throw Error("Unknown papi CacheInstanceType: '".concat(n,"'"))}},t.instance=function(n){return new t(new N(localStorage),t.defaultTtl,n)},t.prototype.get=function(t,n){return V(this,void 0,void 0,(function(){var e,r,o;return K(this,(function(i){switch(i.label){case 0:return[4,this.privacyAwareStorage.withConsent(t)];case 1:return e=i.sent(),r=this.hashCode(n),o=this.load(e),r in o&&o[r].exp>Date.now()?[2,o[r].v]:[2,null]}}))}))},t.prototype.put=function(t,n,e){return V(this,void 0,void 0,(function(){var r,o;return K(this,(function(i){switch(i.label){case 0:return[4,this.privacyAwareStorage.withConsent(t)];case 1:return r=i.sent(),(o=this.load(r))[this.hashCode(n)]={exp:Date.now()+this.ttl,v:e},this.save(r,this.removeExpiredEntries(o)),[2]}}))}))},t.prototype.hashCode=function(t){if(0===t.length)return 0;for(var n=0,e=0;e<t.length;e++)n=(n<<5)-n+t.charCodeAt(e),n|=0;return n},t.prototype.removeExpiredEntries=function(t){var n=Date.now();return Object.fromEntries(Object.entries(t).filter((function(t){t[0];return t[1].exp>n})))},t.prototype.save=function(t,n){t.setItem(this.storageKey,JSON.stringify(n))},t.prototype.load=function(t){var n=t.getItem(this.storageKey);return n?JSON.parse(n):{}},t.contextualKey="opecloud_papi_c",t.profileKey="opecloud_papi_p",t.cacheInstances=new Map,t.defaultTtl=864e5,t}(),Q=function(){var t=this;this.promise=new Promise((function(n,e){t.reject=e,t.resolve=n}))},G=(function(){function t(t,n){if(this.idSpace=t,this.cpid=n,!t||!/^[^\s\:]+$/.test(t))throw Error("Invalid idSpace '".concat(t,"' for cpid"));if(!n||!/^[^\s\:]+$/.test(n))throw Error("Invalid value '".concat(n,"' for cpid"))}t.prototype.toString=function(){return"".concat(this.idSpace,":").concat(this.cpid)}}(),function(){function t(){this.cpid=null,this.optedOut=!1}return t.prototype.getIds=function(){var t=this.cpid;return!this.isOptedOut()&&this.cpid?{cpid:t.toString()}:{}},t.prototype.getPapiParameters=function(t){return this.isOptedOut()?{}:this.getCpid()},t.prototype.getCpid=function(){return null!==this.cpid&&null!==this.cpid.cpid&&null!==this.cpid.idSpace?{cpid:this.cpid.cpid,idSpace:this.cpid.idSpace}:{}},t.prototype.optin=function(){throw new Error("Optout state for custom provided identifiers cannot be modified through the SDK")},t.prototype.optout=function(){throw new Error("Optout state for custom provided identifiers cannot be modified through the SDK")},t.prototype.isOptedOut=function(){return this.optedOut},t.prototype.set=function(t,n){this.cpid=t,this.optedOut=n},t.prototype.clear=function(){this.cpid=null,this.optedOut=!1},t}()),q=function(){return q=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var o in n=arguments[e])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},q.apply(this,arguments)};var z=function(){function t(n,e,r){void 0===r&&(r=!0),this.isInitialized=!1,this.resolvableOnInit=new Q,this.resolvableOnSetCookieCompleted=new Q,this.resolvableOnThirdPartyTrackability=new Q,this.onInit$=this.resolvableOnInit.promise,this.onSetCookieCompleted$=this.resolvableOnSetCookieCompleted.promise,this.name=t.strategyName,this.isThirdPartyTrackable$=this.resolvableOnThirdPartyTrackability.promise,this.cpidProvider=new G,this.fpidProvider=e?d.instance():null,n||this.initialize(),r||this.resolvableOnSetCookieCompleted.resolve()}return t.progInstance=function(){return new t(!1,!0)},t.prototype.initialize=function(){this.isInitialized||(this.isInitialized=!0,this.resolvableOnInit.resolve())},t.prototype.firstVisitEventSent=function(){this.resolvableOnSetCookieCompleted.resolve()},t.prototype.setThirdPartyTrackability=function(t){this.resolvableOnThirdPartyTrackability.resolve(t)},t.prototype.identifyUser=function(t,n){this.cpidProvider.set(t,n),this.initialize(),this.resolvableOnSetCookieCompleted.resolve()},t.prototype.logoutUser=function(){this.initialize(),this.cpidProvider.clear()},t.prototype.getIds=function(){var t,n,e=null===(t=this.fpidProvider)||void 0===t?void 0:t.getIds(),r=null!==(n=this.cpidProvider.getIds())&&void 0!==n?n:{};return q(q({},e),r)},t.prototype.getOrCreateIds=function(t){var n,e,r=null===(n=this.fpidProvider)||void 0===n?void 0:n.getOrCreateFpid(t),o=null!==(e=this.cpidProvider.getIds())&&void 0!==e?e:{};return q(q({},r),o)},t.prototype.discardTrackingEvents=function(){return this.cpidProvider.isOptedOut()},t.prototype.getPapiParameters=function(t){var n,e;return q(q({},null!==(e=null===(n=this.fpidProvider)||void 0===n?void 0:n.getPapiParameters(t))&&void 0!==e?e:{}),this.cpidProvider.getPapiParameters(t))},t.strategyName="adaptive",t}(),$=function(){return $=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var o in n=arguments[e])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},$.apply(this,arguments)},J=function(t,n,e,r){return new(e||(e=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function c(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(a,c)}u((r=r.apply(t,n||[])).next())}))},Y=function(t,n){var e,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;a;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(t,a)}catch(t){i=[6,t],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},B=function(){function t(t,n,e,r){this.seat=t,this.tenant=n,this.papiUrl=e,this.trackingStrategy=r}return t.progInstance=function(n){var e,r,o=null!==(e=n.seat)&&void 0!==e?e:"pdmp",i=null!==(r=n.profileApiUrl)&&void 0!==r?r:"https://".concat(o,".profiles.tagger.opecloud.com/v1/targeting");return new t(o,n.tenantId,new URL(i),z.progInstance())},t.prototype.determineProfileCacheKey=function(){return this.trackingStrategy.getIds().cpid||"adaptive_tracking"},t.prototype.getContextual=function(t){return J(this,void 0,void 0,(function(){return Y(this,(function(n){switch(n.label){case 0:return[4,this.fetchPapi(this.contextualTargetingUrl(t))];case 1:return[2,n.sent()]}}))}))},t.prototype.getCacheBackedContextual=function(t){var n=this;return new Promise((function(e,r){n.getContextual().then((function(r){n.updateCache(t,r),e(r)})),n.loadContextualFromCache(t).then((function(t){e(t)}))}))},t.prototype.loadContextualFromCache=function(t){var n=this.pageUrl();return new Promise((function(e,r){M.instance("contextual").get(t,n).then((function(t){if(null!=t){var n={t:t.content,s:t.kid?"":[],kid:null==t?void 0:t.kid};e(n)}}))}))},t.prototype.getProfile=function(t,n){return J(this,void 0,void 0,(function(){var e;return Y(this,(function(r){switch(r.label){case 0:return[4,t.consent];case 1:return(e=r.sent()).trackingEnabled()?[2,this.fetchPapi(this.profileTargetingUrl(e,n))]:[2,this.getContextual(n)]}}))}))},t.prototype.getCacheBackedProfile=function(t){var n=this;return new Promise((function(e,r){n.getProfile(t).then((function(r){n.updateCache(t,r),e(r)})),n.loadProfileFromCache(t).then((function(t){e(t)}))}))},t.prototype.loadProfileFromCache=function(t){var n=this,e=this.determineProfileCacheKey();return new Promise((function(r,o){M.instance("fullProfile").get(t,e).then((function(e){null!=e&&n.loadContextualFromCache(t).then((function(t){var n=$({t:t.t,s:e.content},(t.kid||e.kid)&&{kid:t.kid||e.kid});r(n)}))}))}))},t.prototype.updateCache=function(t,n){return J(this,void 0,void 0,(function(){return Y(this,(function(e){return(null==n?void 0:n.t)&&M.instance("contextual").put(t,this.pageUrl(),$({content:n.t},n.kid&&{kid:n.kid})),(null==n?void 0:n.s)&&M.instance("fullProfile").put(t,this.determineProfileCacheKey(),$({content:n.s},n.kid&&{kid:n.kid})),!n.t&&n.s,[2]}))}))},t.prototype.fetchPapi=function(t){return J(this,void 0,void 0,(function(){var n,e,r;return Y(this,(function(o){switch(o.label){case 0:return[4,this.fetchFromUrl(t)];case 1:return(n=o.sent()).status>=400?(e=Error,r="Fetch failed: ",[4,n.text()]):[3,3];case 2:throw e.apply(void 0,[r+o.sent()]);case 3:return[2,n]}}))}))},t.prototype.fetchFromUrl=function(t){return fetch(t.toString(),{referrerPolicy:"no-referrer-when-downgrade",mode:"cors",credentials:"include"}).then((function(t){return t.json()}),(function(t){}))},t.prototype.papiRequestUrl=function(t){for(var n=new URL("",this.papiUrl),e=0,r=Object.entries(t);e<r.length;e++){var o=r[e],i=o[0],a=o[1];n.searchParams.set(i,a)}return n},t.prototype.getTenantQueryParams=function(){return this.tenant?{tenant:this.tenant}:{}},t.prototype.profileTargetingUrl=function(t,n){var e=null!=n?n:this.pageUrl();return this.papiRequestUrl($($($({url:e},this.trackingStrategy.getPapiParameters(t)),t.papiParameters()),this.getTenantQueryParams()))},t.prototype.contextualTargetingUrl=function(t){null!=t||this.pageUrl();return this.papiRequestUrl($({url:this.pageUrl(),gdpr_applies:"1",consent_string:""},this.getTenantQueryParams()))},t.prototype.pageUrl=function(){return window.location.href},t}(),H=function(){return H=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var o in n=arguments[e])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},H.apply(this,arguments)},X=function(t,n,e,r){return new(e||(e=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function c(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(a,c)}u((r=r.apply(t,n||[])).next())}))},Z=function(t,n){var e,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;a;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(t,a)}catch(t){i=[6,t],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},W=function(){function t(t){this.url=null,this.url=t}return t.prototype.sendRequest=function(t,n,e,r,o,i){return void 0===e&&(e={}),void 0===r&&(r={}),X(this,void 0,void 0,(function(){var a,c,u,s,l,p,f,h;return Z(this,(function(d){switch(d.label){case 0:for(a=new URL(n,this.url),c=0,u=Object.entries(e);c<u.length;c++)s=u[c],l=s[0],p=s[1],a.searchParams.set(l,p);f=H(H({},i),{referrerPolicy:"no-referrer-when-downgrade",mode:"cors",method:t,credentials:"include",headers:r}),(null==o?void 0:o.contentType)&&(f.headers=H(H({},f.headers),{"Content-Type":o.contentType})),(null==o?void 0:o.content)&&(f.body=o.content),d.label=1;case 1:return d.trys.push([1,3,,4]),[4,fetch(a.toString(),f)];case 2:if((h=d.sent()).ok)return[2];throw{status:h.status,statusText:h.statusText};case 3:throw d.sent();case 4:return[2]}}))}))},t}(),tt=function(){function t(t){this.taggerUrl=t,this.httpClient=new W(t)}return t.prototype.optOut=function(t,n,e){var r={contentType:"application/x-www-form-urlencoded",content:this.encodeAsFormUrlString({fpid:null!=e?e:""})},o=n?"/".concat(t,"/").concat(n,"/v2/tagger/optout"):"/".concat(t,"/v2/tagger/optout");return this.httpClient.sendRequest("POST",o,{},{},r)},t.prototype.optIn=function(t,n,e){var r=e?{fpid:e}:{},o=n?"/".concat(t,"/").concat(n,"/v2/tagger/optout"):"/".concat(t,"/v2/tagger/optout");return this.httpClient.sendRequest("DELETE",o,r)},t.prototype.dataDeletion=function(t,n,e){var r={contentType:"application/x-www-form-urlencoded",content:this.encodeAsFormUrlString({fpid:null!=e?e:""})},o=n?"/".concat(t,"/").concat(n,"/v2/tagger/delete"):"/".concat(t,"/v2/tagger/delete");return this.httpClient.sendRequest("POST",o,{},{},r)},t.prototype.dataAccess=function(t,n,e,r,o){var i={contentType:"application/x-www-form-urlencoded",content:this.encodeAsFormUrlString({email:e,languageCode:r,fpid:null!=o?o:""})},a=n?"/".concat(t,"/").concat(n,"/v2/tagger/access"):"/".concat(t,"/v2/tagger/access");return this.httpClient.sendRequest("POST",a,{},{},i)},t.prototype.encodeAsFormUrlString=function(t){return Object.entries(t).map((function(t,n){var e=t[0],r=t[1];return"".concat(e,"=").concat(encodeURIComponent(r))})).join("&")},t}(),nt=function(){return nt=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var o in n=arguments[e])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},nt.apply(this,arguments)},et=function(){function t(t,n,e,r,o,i){this.seat=t,this.tenant=n,this.taggerUrl=e,this.consent=r,this.taggerClient=o,this.trackingStrategy=i,this.visitEventQueue=[],this.customEventQueue=[]}return t.progInstance=function(n){var e,r,o=null!==(e=n.seat)&&void 0!==e?e:"pdmp",i=new URL(null!==(r=null==n?void 0:n.taggerUrl)&&void 0!==r?r:"https://pdmp.tagger.opecloud.com");return new t(o,n.tenant,i,n.consent,n.taggerClient,z.progInstance())},t.prototype.customEventsToVisitProps=function(t){return{e:JSON.stringify(t.map((function(t){return nt(nt({},t.content),{type:t.type})})))}},t.customEventToCustomNoTaggerProps=function(t){var n={type:t.type,url:t.url,ref:t.ref,tref:t.tref};return Object.entries(t.content).forEach((function(t){var e=t[0],r=t[1];n[e]||(n[e]="object"==typeof r?JSON.stringify(r):r+"")})),n},t.prototype.flushOutQueues=function(n,e){var r=this;e.discardTrackingEvents()?(this.customEventQueue=[],this.visitEventQueue=[]):n.trackingEnabled()&&(this.visitEventQueue.forEach((function(t){var o=nt(nt({},t),n.extraEventProperties()),i=nt(nt(nt({},o),r.customEventsToVisitProps(r.customEventQueue)),e.getOrCreateIds(n)),a=r.pixelUrl();r.taggerClient.callPixel(a,i).then((function(t){e.setThirdPartyTrackability(t.isThirdPartyTrackable),e.firstVisitEventSent()})),r.customEventQueue=[]})),this.visitEventQueue=[],this.customEventQueue.forEach((function(o){var i=nt(nt(nt({},t.customEventToCustomNoTaggerProps(o)),n.extraEventProperties()),e.getOrCreateIds(n)),a=r.customEventUrl();r.taggerClient.callPixel(a,i).then((function(t){return e.setThirdPartyTrackability(t.isThirdPartyTrackable)}))})),this.customEventQueue=[])},t.prototype.customEventUrl=function(){return new URL("".concat(this.seat,"/v2/custom-no-tagger"),this.taggerUrl)},t.prototype.pixelUrl=function(){return this.tenant?new URL("".concat(this.seat,"/").concat(this.tenant,"/v2/pixel.gif"),this.taggerUrl):new URL("".concat(this.seat,"/v2/pixel.gif"),this.taggerUrl)},t.prototype.pixelCookieOnlyUrl=function(){return new URL("".concat(this.seat,"/").concat(this.tenant,"/v2/pixel-only-cookie.gif"),this.taggerUrl)},t.prototype.sendVisitEvent=function(t){var n=this;this.trackingStrategy.discardTrackingEvents()||(this.visitEventQueue.push(t),Promise.all([this.consent,this.trackingStrategy.onInit$]).then((function(t){return n.flushOutQueues(t[0],n.trackingStrategy)})))},t.prototype.invokePixelOnlyCookie=function(){var t=this;Promise.all([this.consent,this.trackingStrategy.onInit$]).then((function(n){t.taggerClient.callPixel(t.pixelCookieOnlyUrl(),{fpid:t.trackingStrategy.getOrCreateIds(n[0]).fpid}).then((function(n){t.trackingStrategy.setThirdPartyTrackability(n.isThirdPartyTrackable),t.trackingStrategy.firstVisitEventSent()}))}))},t.prototype.sendCustomEvent=function(t){var n=this;this.trackingStrategy.discardTrackingEvents()||(this.customEventQueue.push(t),Promise.all([this.consent,this.trackingStrategy.onInit$]).then((function(t){return n.flushOutQueues(t[0],n.trackingStrategy)})))},t}();function rt(){try{return"eu-central-1"}catch(t){return""}}var ot=function(){return ot=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var o in n=arguments[e])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},ot.apply(this,arguments)},it=function(){function t(t){t.sendVisitEvent(ct({}))}return t.prototype.processSendVisitCommand=function(){throw Error('"sendVisit" command is not supported with automatic visit provider')},t}(),at=function(){function t(t){this.tracker=t}return t.prototype.processSendVisitCommand=function(t){this.tracker.sendVisitEvent(ct(t))},t}();function ct(t){return ot(ot({},function(){var t,n;return{url:window.location.href,ref:document.referrer,tref:null===(n=null===(t=window.top)||void 0===t?void 0:t.document)||void 0===n?void 0:n.referrer}}()),{tz:(new Date).getTimezoneOffset()/60,screen:window.screen.width+"x"+window.screen.height+"x"+window.screen.colorDepth,visiturl:t.visitUrl,dcRegion:rt()})}var ut=function(t,n,e,r){return new(e||(e=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function c(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(a,c)}u((r=r.apply(t,n||[])).next())}))},st=function(t,n){var e,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;a;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(t,a)}catch(t){i=[6,t],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},lt=function(){function t(t){this.privacyAwareStorage=t}return t.instance=function(){return new t(new N(localStorage))},t.prototype.update=function(t,n,e,r){return ut(this,void 0,void 0,(function(){var o=this;return st(this,(function(i){return Promise.all([e.isThirdPartyTrackable$,n.consent]).then((function(i){var a=i[0],c=i[1];a||e.getOrCreateIds(c).cpid||!e.getOrCreateIds(c).fpid||o.doUpdate(t,n,r)})),n.consent.then((function(t){t.trackingEnabled()||o.remove()})),[2]}))}))},t.prototype.doUpdate=function(t,n,e){return ut(this,void 0,void 0,(function(){var r,o=this;return st(this,(function(i){return r=t.getProfile(n,e).catch((function(t){return{error:t.message||"Unknown error"}})),[2,this.privacyAwareStorage.withConsent(n).then((function(t){return ut(o,void 0,void 0,(function(){var n,e;return st(this,(function(o){switch(o.label){case 0:return n=this.save,e=[t],[4,r];case 1:return n.apply(this,e.concat([o.sent()])),[2]}}))}))}),(function(t){return ut(o,void 0,void 0,(function(){return st(this,(function(t){return[2,void 0]}))}))}))]}))}))},t.prototype.save=function(n,e){n.setItem(t.localStorageKey,JSON.stringify(e))},t.prototype.remove=function(){this.privacyAwareStorage.removeItem(t.localStorageKey)},t.localStorageKey="opecloud_ctx",t}(),pt=function(t,n,e,r){return new(e||(e=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function c(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(a,c)}u((r=r.apply(t,n||[])).next())}))},ft=function(t,n){var e,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;a;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(t,a)}catch(t){i=[6,t],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},ht=function(){function t(){this.consent=this.loadConsent()}return t.prototype.deviceAccessOk=function(){return pt(this,void 0,void 0,(function(){return ft(this,(function(t){switch(t.label){case 0:return this.deviceAccessRestricted?[3,1]:[2,!0];case 1:return[4,this.consent];case 2:return[2,t.sent().deviceAccessAllowed()]}}))}))},t}(),dt=function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])},t(n,e)};return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),vt=function(){function t(){}return t.prototype.applies=function(){return!0},t.prototype.trackingEnabled=function(){return!0},t.prototype.deviceAccessAllowed=function(){return!0},t.prototype.extraEventProperties=function(){return{cmpstatus:"notrequired"}},t.prototype.consentString=function(){return null},t.prototype.papiParameters=function(){return{}},t}(),yt=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.deviceAccessRestricted=!1,n}return dt(n,t),n.prototype.loadConsent=function(){return Promise.resolve(new vt)},n}(ht),gt=function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])},t(n,e)};return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),wt=function(){function t(){}return t.prototype.applies=function(){return!0},t.prototype.trackingEnabled=function(){return!1},t.prototype.deviceAccessAllowed=function(){return!1},t.prototype.extraEventProperties=function(){return{}},t.prototype.consentString=function(){return null},t.prototype.papiParameters=function(){return{}},t}(),mt=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.deviceAccessRestricted=!0,n}return gt(n,t),n.prototype.loadConsent=function(){return Promise.resolve(new wt)},n}(ht);function bt(){return Math.random().toString().substring(2)}var Ot=function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])},t(n,e)};return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),St=function(){function t(t){this.tcData=t}return t.prototype.applies=function(){return!1!==this.tcData.gdprApplies},t.prototype.consentForVendor=function(t){var n,e,r=null===(e=null===(n=this.tcData)||void 0===n?void 0:n.vendor)||void 0===e?void 0:e.consents;return void 0!==r&&!0===r[t]},t.prototype.purposeConsent=function(t){var n,e,r;return!!(null===(r=null===(e=null===(n=this.tcData)||void 0===n?void 0:n.purpose)||void 0===e?void 0:e.consents)||void 0===r?void 0:r[t])},t.prototype.legitimateInterest=function(t){var n,e,r;return!!(null===(r=null===(e=null===(n=this.tcData)||void 0===n?void 0:n.purpose)||void 0===e?void 0:e.legitimateInterests)||void 0===r?void 0:r[t])},t.prototype.deviceAccessAllowed=function(){return!this.applies()||this.consentForVendor(92)&&this.purposeConsent(1)},t.prototype.trackingEnabled=function(){return!this.applies()||this.consentForVendor(92)&&this.purposeConsent(1)&&(this.purposeConsent(3)||this.legitimateInterest(3))&&(this.purposeConsent(5)||this.legitimateInterest(5))&&(this.purposeConsent(7)||this.legitimateInterest(7))&&(this.purposeConsent(8)||this.legitimateInterest(8))&&(this.purposeConsent(9)||this.legitimateInterest(9))},t.prototype.extraEventProperties=function(){return{cmpstatus:this.applies()?"cmpconsent":"gdprdoesnotapply",tcString:this.tcData.tcString}},t.prototype.consentString=function(){return this.tcData.tcString},t.prototype.papiParameters=function(){return{gdpr_applies:this.applies()?"1":"0",consent_string:this.tcData.tcString}},t}(),Pt=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.deviceAccessRestricted=!0,n}return Ot(n,t),n.prototype.loadConsent=function(){return new Promise((function(t){var n=bt();function e(t){return t.frames.__tcfapiLocator||t==window.top?t:e(t.parent)}function r(e){var r,o=e.data.__tcfapiReturn;o&&o.callId===n&&o.success&&(null==(r=o.returnValue)||function(t){return["useractioncomplete","tcloaded"].includes(t.eventStatus)}(r)&&t(new St(r))),o&&o.success}window.addEventListener("message",r,!1),e(window).postMessage({__tcfapiCall:{command:"addEventListener",version:2,callId:n}},"*")}))},n}(ht),kt=function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])},t(n,e)};return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),_t=function(){function t(n){if(!(null==n?void 0:n.match(t.regex)))throw new Error("invalid uspString: ".concat(n));this.uspString=n.toUpperCase()}return t.prototype.ccpaApplies=function(){return"1---"!=this.uspString},Object.defineProperty(t.prototype,"salesOptOut",{get:function(){var t,n=null===(t=this.uspString)||void 0===t?void 0:t.charAt(2);return"Y"===n||"N"!==n&&null},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this.uspString},t.regex=/^[1][nNyY-][nNyY-][nNyY-]$/,t}(),Ct=function(){function t(t){this.uspData=t;try{this.uspString=new _t(null==t?void 0:t.uspString)}catch(n){throw new Error("failed to initialize USPConsent. uspData: ".concat(t,", error: ").concat(n.message))}}return t.prototype.applies=function(){return this.uspString.ccpaApplies()},t.prototype.trackingEnabled=function(){return!this.uspString.ccpaApplies()||!this.uspString.salesOptOut},t.prototype.deviceAccessAllowed=function(){return!0},t.prototype.extraEventProperties=function(){return{uspstatus:this.uspString.ccpaApplies()?this.uspString.salesOptOut?"uspoptoutsaleconsent":"uspoptoutsalenoconsent":"ccpadoesnotapply"}},t.prototype.consentString=function(){return this.uspString.toString()},t.prototype.papiParameters=function(){return{}},t}(),Et=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.deviceAccessRestricted=!0,n}return kt(n,t),n.prototype.loadConsent=function(){return new Promise((function(t,e){var r=bt();function o(t){return t.frames.__uspapiLocator?t:t==window.top?null:o(t.parent)}window.addEventListener("message",(function(n){var o=n.data.__uspapiReturn;if((null==o?void 0:o.callId)===r)if(o.success)try{var i=new Ct(o.returnValue);t(i)}catch(t){e(t)}else e(new Error(o.returnValue))}),!1),function t(e,r,i){void 0===r&&(r=n.retries);void 0===i&&(i=n.delay);return new Promise((function(n,a){var c=o(e);c?n(c):r>0?setTimeout((function(){return n(t(e,r-1,i))}),i):a(new D("Failed to locate __uspapiLocator iframe"))}))}(window).then((function(t){t.postMessage({__uspapiCall:{callId:r,command:"getUSPData",version:1}},"*")})).catch((function(){e(new D("failed to locate __uspapiLocator iframe"))}))}))},n.delay=100,n.retries=20,n}(ht),xt=function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])},t(n,e)};return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Tt=function(){function t(t,n){if(this.gppData=t,this.gppString=n,!t)throw Error("gppData must be defined to parse");this.optedOut=this.getOptoutFromField(t,"SharingNotice",[1])||this.getOptoutFromField(t,"SaleOptOutNotice",[1])||this.getOptoutFromField(t,"SharingOptOutNotice",[1])||this.getOptoutFromField(t,"TargetedAdvertisingOptOutNotice",[1])||this.getOptoutFromField(t,"SensitiveDataProcessingOptOutNotice",[0])||this.getOptoutFromField(t,"SensitiveDataLimitUseNotice",[0])||this.getOptoutFromField(t,"SaleOptOut",[2])||this.getOptoutFromField(t,"SharingOptOut",[2])||this.getOptoutFromField(t,"TargetedAdvertisingOptOut",[2])||this.getOptoutFromField(t,"SensitiveDataProcessing",[0])||this.getOptoutFromField(t,"KnownChildSensitiveDataConsents",[0])||this.getOptoutFromField(t,"PersonalDataConsents",[0,2]),1==t.MspaCoveredTransaction&&(this.optedOut||(this.optedOut=this.getOptoutFromField(t,"MspaOptOutOptionMode",[0,1])||this.getOptoutFromField(t,"MspaServiceProviderMode",[0,2])))}return t.prototype.getOptoutFromField=function(t,n,e){if(!(n in t))throw Error("gppdata field should be present: ".concat(n));return!e.includes(t[n])},t.prototype.applies=function(){return!0},t.prototype.deviceAccessAllowed=function(){return!this.optedOut},t.prototype.trackingEnabled=function(){return!this.optedOut},t.prototype.consentString=function(){return this.gppString},t.prototype.extraEventProperties=function(){return{}},t.prototype.papiParameters=function(){return{gppString:this.gppString}},t}(),It=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.deviceAccessRestricted=!0,n.listenerId=null,n}return xt(n,t),n.prototype.loadConsent=function(){return new Promise((function(t){var n=bt();window.addEventListener("message",(function(e){var r=e.data.__gppReturn;r&&r.callId===n&&r.success&&function(n){if(n&&n.data){if(function(t){if("signalStatus"!==t.eventName||"ready"!==t.data)return!1;if("usnat"in t.pingData.parsedSections)return!0;return!1}(n)){var e=n.pingData.gppString,r=new Tt(n.pingData.parsedSections.usnat,e);t(r)}}else;}(r.returnValue);r&&r.success}),!1);var e=function t(n){return n.frames.__gppLocator||n==window.top?n:t(n.parent)}(window);e.postMessage({__gppCall:{command:"addEventListener",version:1,callId:n}},"*")}))},n}(ht),At=function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])},t(n,e)};return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ut=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.deviceAccessRestricted=!0,n}return At(n,t),n.prototype.loadConsent=function(){var t=this;return new Promise((function(e,r){var o=void 0,i=void 0;t.consentsToAwait=[(new Pt).consent,(new Et).consent,(new It).consent],t.consentsToAwait.forEach((function(t){t.then((function(t){t.applies()?e(t):o=t})).catch((function(t){t instanceof D||(i=t)}))})),Promise.allSettled(t.consentsToAwait).then((function(t){var n=t.find((function(t){return"fulfilled"==t.status&&t.value.applies()})),o=t.find((function(t){return"fulfilled"==t.status})),i=t.find((function(t){return"rejected"==t.status&&!(t.reason instanceof D)}));n?e(n.value):i?r(i.reason):e(o?new vt:new wt)})),setTimeout((function(){i?r(i):e(o?new vt:new wt)}),n.timeout)}))},n.timeout=2e3,n}(ht),Ft=function(){function t(){}return t.initialize=function(t){switch(t){case"tcf2":return new Pt;case"implied":return new yt;case"usp":return new Et;case"auto":return new Ut;case"noConsent":return new mt;case"gpp":return new It;default:throw new Error("Privacy framework '".concat(t,"' not supported"))}},t}();function jt(t,n,e,r){return void 0===e&&(e=0),void 0===r&&(r=0),new Promise((function(o,i){t().then(o).catch((function(a){r<n?setTimeout((function(){jt(t,n,e,r+1).then(o).catch(i)}),e):i(a)}))}))}var Dt=function(t,n,e,r){return new(e||(e=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function c(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(a,c)}u((r=r.apply(t,n||[])).next())}))},Rt=function(t,n){var e,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;a;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(t,a)}catch(t){i=[6,t],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},Lt=function(){function t(t,n,e,r,o,i,a,c,u){void 0===i&&(i=4),void 0===a&&(a=40),void 0===c&&(c=window),void 0===u&&(u=864e5),this.tenantId=t,this.storage=n,this.tracker=e,this.consent=r,this.dcAPIClient=o,this.maxATSRetrievalRetries=i,this.retryDelay=a,this._window=c,this.ttl=u}return t.prototype.syncAvalaibleIDs=function(){var n=this;return new Promise((function(e,r){n.syncAlreadySent()?e():n.loadEnvelope().then((function(r){n.sendSync(r),n.storage.setItem(t.syncAlreadySentKey,JSON.stringify({exp:Date.now()+n.ttl})),e()})).catch((function(t){r(t)}))}))},t.prototype.loadEnvelope=function(){var t=this;return jt((function(){return new Promise((function(n,e){t.ATSOnPage()?t.getFromATS().then((function(t){return n(t)})).catch((function(t){e(t)})):e(new Error("ATS.js could not be loaded from window. LiveRamp ID cannot be loaded at the moment."))}))}),this.maxATSRetrievalRetries,this.retryDelay)},t.prototype.ATSOnPage=function(){return this._window.ats},t.prototype.syncAlreadySent=function(){var n=this.storage.getItem(t.syncAlreadySentKey);return!!n&&JSON.parse(n).exp>Date.now()},t.prototype.sendSync=function(t){var n,e=this.tracker.trackingStrategy.getOrCreateIds(this.consent);if(e.cpid)n=e.cpid;else{if(!e.fpid)return Promise.resolve();n="fpid:".concat(e.fpid)}var r={ope_event_type:"encrypted-sync-event",ope_liveramp_envelope:t,ope_channel:"liveramp-syncs",ope_tenant:this.tenantId,ope_user_id:n};this.dcAPIClient.sendIngestionEvent(r,e.fpid)},t.prototype.getFromATS=function(){return Dt(this,void 0,void 0,(function(){var t;return Rt(this,(function(n){switch(n.label){case 0:return[4,this._window.ats.retrieveEnvelope()];case 1:return t=n.sent(),[2,JSON.parse(t).envelope]}}))}))},t.syncAlreadySentKey="_sync_ope_liveramp_id",t}(),Nt=function(){function t(t){this.dcAPIUrl=t,this.httpClient=new W(this.dcAPIUrl)}return t.prototype.sendIngestionEvent=function(t,n,e,r){return void 0===e&&(e={}),void 0===r&&(r="/ingest/event"),this.httpClient.sendRequest("POST",r,n?{fpid:n}:{},{},{contentType:"application/json",content:JSON.stringify(t)},e)},t}(),Vt=function(){function t(t,n,e,r,o,i,a,c){void 0===c&&(c=864e5),this.seat=t,this.trackingStrategy=n,this.privacyFramework=e,this.dcAPIClient=r,this.storage=o,this._document=i,this.tenant=a,this.sendInterval=c}return t.prototype.upload=function(){var t=this;return Promise.all([this.privacyFramework.consent,this.trackingStrategy.onInit$]).then((function(n){var e=n[0];if(!t._document.browsingTopics)throw"No Topics API";if(!t.shouldSendTopics())throw"Topics cached with TTL > 0";var r=t.trackingStrategy.getOrCreateIds(e).fpid;if(!r)throw"No UID available due to missing consent";return{ope_channel:"".concat(t.seat,"-google-topics-tagged"),ope_event_type:"topics",ope_item_uri:window.location.href,ope_tenant:t.tenant,ope_user_id:"fpid:".concat(r)}})).then((function(n){return t.dcAPIClient.sendIngestionEvent(n,void 0,{browsingTopics:!0},"/ingest/topics")})).then((function(){t.updateTopics()}))},t.prototype.shouldSendTopics=function(){var n=this.storage.getItem(t.topicsLocalStoreMarker);return!n||JSON.parse(n).exp<Date.now()},t.prototype.updateTopics=function(){this.storage.setItem(t.topicsLocalStoreMarker,JSON.stringify({exp:Date.now()+this.sendInterval}))},t.topicsLocalStoreMarker="_ope_topics",t}(),Kt=function(){function t(t,n,e,r){this.seat=t,this.tenantId=n,this.cmpName=e,this.options=r}return t.prototype.run=function(t,n){var e,r,o,i,a,c,u,s,l,p,f,h,v,y=this;if(null==t){var g=new URL(null!==(r=null===(e=this.options)||void 0===e?void 0:e.taggerUrl)&&void 0!==r?r:"https://pdmp.tagger.opecloud.com"),w=new URL(null!==(i=null===(o=this.options)||void 0===o?void 0:o.dcAPIUrl)&&void 0!==i?i:"https://pdmp.dcapi.tagger.opecloud.com"),m=null===(c=null===(a=this.options)||void 0===a?void 0:a.liveRampEnabled)||void 0===c||c,b=new Nt(w),O=F(g,this.seat),S=Ft.initialize(this.cmpName);p=S.consent,f=O,h=this.cmpName,v=!1,p.then((function(t){v=!0,t.trackingEnabled()||f(new A({cmp:h,consentString:t.consentString()}))}),(function(t){f(new U({cmp:h,errorMessage:JSON.stringify(t)}))})),window.setTimeout((function(){v||f(new I({cmp:h}))}),5e3);var P=et.progInstance({seat:this.seat,tenant:this.tenantId,taggerUrl:g.toString(),consent:S.consent,taggerClient:n.taggerClient}),k=function(t,n){switch(t){case"automatic":return new it(n);case"cmd":return new at(n);default:throw new Error("Invalid visit provider ".concat(t))}}(null!==(s=null===(u=this.options)||void 0===u?void 0:u.visitProvider)&&void 0!==s?s:"automatic",P),_=B.progInstance({seat:this.seat,tenantId:this.tenantId,profileApiUrl:null===(l=this.options)||void 0===l?void 0:l.profileApiUrl}),C=lt.instance();return k instanceof it&&C.update(_,S,P.trackingStrategy),S.consent.then((function(t){if(!(null==t?void 0:t.trackingEnabled()))throw"Tracking disabled";if(!m)throw"Liveramp Ingestion disabled";return new Lt(y.tenantId,localStorage,P,t,b).syncAvalaibleIDs()})).then((function(){})).catch((function(t){})),new Vt(this.seat,P.trackingStrategy,S,b,localStorage,window.document,this.tenantId).upload().then((function(){})).catch((function(t){})),S.consent.then((function(t){(null==t?void 0:t.trackingEnabled())||(new d(localStorage).removeFpid(),C.remove())})),{tracker:P,privacyFramework:S,profileApi:_,reporter:O,visitProvider:k,trackingStrategy:P.trackingStrategy,taggerGdprClient:new tt(g)}}return t},t}(),Mt=function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])},t(n,e)};return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Qt=function(t,n,e,r){return new(e||(e=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function c(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(a,c)}u((r=r.apply(t,n||[])).next())}))},Gt=function(t,n){var e,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;a;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(t,a)}catch(t){i=[6,t],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},qt=function(t){function n(n,e,r){var o=t.call(this,n,e,r)||this;return o.tenant=e,o}return Mt(n,t),n.prototype.action=function(t){return Qt(this,void 0,void 0,(function(){var n,e,r,o;return Gt(this,(function(i){switch(i.label){case 0:return(n=d.instance()).optin(),o=(r=n).getOrCreateFpid,[4,t.privacyFramework.consent];case 1:return e=o.apply(r,[i.sent()]).fpid,[4,t.taggerGdprClient.optIn(this.seat,this.tenant,e)];case 2:return i.sent(),[2]}}))}))},n}(g),zt=function(){function t(t,n,e){void 0===e&&(e=localStorage),this.seat=t,this.options=n,this.storage=e}return t.prototype.run=function(t){var n=this;return null==t||t.visitProvider.processSendVisitCommand(this.options),t.privacyFramework.consent.then((function(e){t.trackingStrategy.getOrCreateIds(e),new lt(new N(n.storage)).doUpdate(t.profileApi,t.privacyFramework,n.options.visitUrl)})),t},t}(),$t=function(){function t(){}return t.prototype.parse=function(t,n,e){var r=this.redirectDMPLite(t);try{switch(n){case"dataAccess":return this.parseDataAccess(r,e);case"dataDeletion":return this.parseDataDeletion(r,e);case"init":return this.parseInit(r,e);case"optin":return this.parseOptIn(r,e);case"optout":return this.parseOptOut(r,e);case"sendVisit":return this.parseSendVisit(r,e);default:return null}}catch(t){return null}},t.prototype.redirectDMPLite=function(t){return"dmplite"==t?"pdmp":t},t.prototype.parseInit=function(t,n){var r=e.parseString(n[0]),o=e.parseCmpName(n[1]),i=e.parseOptions(n[2]);return new Kt(t,r,o,i)},t.prototype.parseDataAccess=function(t,n){var r=e.parseString(n[0]),o=e.parseString(n[1]),i=e.parseString(n[2]),a=e.validateOptCallback(null==n?void 0:n[3]);return new O(t,r,o,i,a)},t.prototype.parseDataDeletion=function(t,n){var r=e.parseString(n[0]),o=e.validateOptCallback(null==n?void 0:n[1]);return new T(t,r,o)},t.prototype.parseOptIn=function(t,n){var r=e.parseString(n[0]),o=e.validateOptCallback(null==n?void 0:n[1]);return new qt(t,r,o)},t.prototype.parseOptOut=function(t,n){var r=e.parseString(n[0]),o=e.validateOptCallback(null==n?void 0:n[1]);return new _(t,r,o)},t.prototype.parseSendVisit=function(t,n){var r=e.parseOptions(n[0]);return new zt(t,r)},t}(),Jt=window.ope,Yt=new r(new Map,{taggerClient:new t},new $t).ope;if(Jt.q)for(var Bt=0,Ht=Jt.q;Bt<Ht.length;Bt++){var Xt=Ht[Bt];Yt.apply(void 0,Xt)}window.ope=Yt}();